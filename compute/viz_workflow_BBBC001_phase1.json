{
    "$namespaces": {
        "edam": "https://edamontology.org/"
    },
    "$schemas": [
        "https://raw.githubusercontent.com/edamontology/edamontology/master/EDAM_dev.owl"
    ],
    "class": "Workflow",
    "cwlJobInputs": {
        "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___name": "BBBC001",
        "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___outDir": {
            "class": "Directory",
            "location": "inpDirFileRenaming"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___filePattern": ".*_{row:c}{col:dd}f{f:dd}d{channel:d}.tif",
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___mapDirectory": "raw",
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outDir": {
            "class": "Directory",
            "location": "inpDirOmeConverter"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outFilePattern": "d{directory:dd}_x{row:dd}_y{col:dd}_p{f:dd}_c{channel:d}.tif",
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___fileExtension": ".ome.tif",
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___filePattern": ".*.tif",
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___outDir": {
            "class": "Directory",
            "location": "inpDirMontage"
        },
        "viz_workflow_BBBC001_phase1__step__4__Montage___filePattern": "d00_x00_y03_p{p:dd}_c0.ome.tif",
        "viz_workflow_BBBC001_phase1__step__4__Montage___layout": "p",
        "viz_workflow_BBBC001_phase1__step__4__Montage___outDir": {
            "class": "Directory",
            "location": "stitchPathImageAssembler"
        },
        "viz_workflow_BBBC001_phase1__step__5__ImageAssembler___outDir": {
            "class": "Directory",
            "location": "inpDirPrecomputeSlide"
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___imageType": "image",
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___outDir": {
            "class": "Directory",
            "location": "BBBC/BBBC001_out"
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___pyramidType": "Zarr"
    },
    "cwlVersion": "v1.2",
    "driver": "argo",
    "inputs": {
        "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___name": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___outDir": {
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___filePattern": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___mapDirectory": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outDir": {
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outFilePattern": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___fileExtension": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___filePattern": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___outDir": {
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__4__Montage___filePattern": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__4__Montage___layout": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__4__Montage___outDir": {
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__5__ImageAssembler___outDir": {
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___imageType": {
            "type": "string"
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___outDir": {
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___pyramidType": {
            "type": "string"
        }
    },
    "name": "viz_workflow_BBBC001_phase1",
    "outputs": {
        "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___outDir": {
            "outputSource": "viz_workflow_BBBC001_phase1__step__1__BbbcDownload/outDir",
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outDir": {
            "outputSource": "viz_workflow_BBBC001_phase1__step__2__FileRenaming/outDir",
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter___outDir": {
            "outputSource": "viz_workflow_BBBC001_phase1__step__3__OmeConverter/outDir",
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__4__Montage___outDir": {
            "outputSource": "viz_workflow_BBBC001_phase1__step__4__Montage/outDir",
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__5__ImageAssembler___outDir": {
            "outputSource": "viz_workflow_BBBC001_phase1__step__5__ImageAssembler/outDir",
            "type": "Directory"
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___outDir": {
            "outputSource": "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide/outDir",
            "type": "Directory"
        }
    },
    "steps": {
        "viz_workflow_BBBC001_phase1__step__1__BbbcDownload": {
            "in": {
                "name": {
                    "source": "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___name"
                },
                "outDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__1__BbbcDownload___outDir"
                }
            },
            "out": [
                "outDir"
            ],
            "run": {
                "baseCommand": [
                    "python3",
                    "-m",
                    "polus.plugins.utils.bbbc_download"
                ],
                "class": "CommandLineTool",
                "cwlVersion": "v1.2",
                "inputs": {
                    "name": {
                        "inputBinding": {
                            "prefix": "--name"
                        },
                        "type": "string"
                    },
                    "outDir": {
                        "inputBinding": {
                            "prefix": "--outDir"
                        },
                        "type": "Directory"
                    }
                },
                "outputs": {
                    "outDir": {
                        "outputBinding": {
                            "glob": "$(inputs.outDir.basename)"
                        },
                        "type": "Directory"
                    }
                },
                "requirements": {
                    "DockerRequirement": {
                        "dockerPull": "polusai/bbbc-download-plugin:0.1.0-dev1"
                    },
                    "InitialWorkDirRequirement": {
                        "listing": [
                            {
                                "entry": "$(inputs.outDir)",
                                "writable": true
                            }
                        ]
                    },
                    "InlineJavascriptRequirement": {}
                }
            }
        },
        "viz_workflow_BBBC001_phase1__step__2__FileRenaming": {
            "in": {
                "filePattern": {
                    "source": "viz_workflow_BBBC001_phase1__step__2__FileRenaming___filePattern"
                },
                "inpDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__1__BbbcDownload/outDir"
                },
                "mapDirectory": {
                    "source": "viz_workflow_BBBC001_phase1__step__2__FileRenaming___mapDirectory"
                },
                "outDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outDir"
                },
                "outFilePattern": {
                    "source": "viz_workflow_BBBC001_phase1__step__2__FileRenaming___outFilePattern"
                }
            },
            "out": [
                "outDir"
            ],
            "run": {
                "baseCommand": [
                    "python3",
                    "-m",
                    "polus.plugins.formats.file_renaming"
                ],
                "class": "CommandLineTool",
                "cwlVersion": "v1.2",
                "inputs": {
                    "filePattern": {
                        "inputBinding": {
                            "prefix": "--filePattern"
                        },
                        "type": "string"
                    },
                    "inpDir": {
                        "inputBinding": {
                            "prefix": "--inpDir"
                        },
                        "type": "Directory"
                    },
                    "mapDirectory": {
                        "inputBinding": {
                            "prefix": "--mapDirectory"
                        },
                        "type": "string?"
                    },
                    "outDir": {
                        "inputBinding": {
                            "prefix": "--outDir"
                        },
                        "type": "Directory"
                    },
                    "outFilePattern": {
                        "inputBinding": {
                            "prefix": "--outFilePattern"
                        },
                        "type": "string"
                    }
                },
                "outputs": {
                    "outDir": {
                        "outputBinding": {
                            "glob": "$(inputs.outDir.basename)"
                        },
                        "type": "Directory"
                    }
                },
                "requirements": {
                    "DockerRequirement": {
                        "dockerPull": "polusai/file-renaming-plugin:0.2.4-dev"
                    },
                    "InitialWorkDirRequirement": {
                        "listing": [
                            {
                                "entry": "$(inputs.outDir)",
                                "writable": true
                            }
                        ]
                    },
                    "InlineJavascriptRequirement": {}
                }
            }
        },
        "viz_workflow_BBBC001_phase1__step__3__OmeConverter": {
            "in": {
                "fileExtension": {
                    "source": "viz_workflow_BBBC001_phase1__step__3__OmeConverter___fileExtension"
                },
                "filePattern": {
                    "source": "viz_workflow_BBBC001_phase1__step__3__OmeConverter___filePattern"
                },
                "inpDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__2__FileRenaming/outDir"
                },
                "outDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__3__OmeConverter___outDir"
                }
            },
            "out": [
                "outDir"
            ],
            "run": {
                "baseCommand": [
                    "python3",
                    "-m",
                    "polus.plugins.formats.ome_converter"
                ],
                "class": "CommandLineTool",
                "cwlVersion": "v1.2",
                "inputs": {
                    "fileExtension": {
                        "inputBinding": {
                            "prefix": "--fileExtension"
                        },
                        "type": "string"
                    },
                    "filePattern": {
                        "inputBinding": {
                            "prefix": "--filePattern"
                        },
                        "type": "string"
                    },
                    "inpDir": {
                        "inputBinding": {
                            "prefix": "--inpDir"
                        },
                        "type": "Directory"
                    },
                    "outDir": {
                        "inputBinding": {
                            "prefix": "--outDir"
                        },
                        "type": "Directory"
                    }
                },
                "outputs": {
                    "outDir": {
                        "outputBinding": {
                            "glob": "$(inputs.outDir.basename)"
                        },
                        "type": "Directory"
                    }
                },
                "requirements": {
                    "DockerRequirement": {
                        "dockerPull": "polusai/ome-converter-plugin:0.3.0"
                    },
                    "InitialWorkDirRequirement": {
                        "listing": [
                            {
                                "entry": "$(inputs.outDir)",
                                "writable": true
                            }
                        ]
                    },
                    "InlineJavascriptRequirement": {}
                }
            }
        },
        "viz_workflow_BBBC001_phase1__step__4__Montage": {
            "in": {
                "filePattern": {
                    "source": "viz_workflow_BBBC001_phase1__step__4__Montage___filePattern"
                },
                "inpDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__3__OmeConverter/outDir"
                },
                "layout": {
                    "source": "viz_workflow_BBBC001_phase1__step__4__Montage___layout"
                },
                "outDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__4__Montage___outDir"
                }
            },
            "out": [
                "outDir"
            ],
            "run": {
                "baseCommand": [
                    "python3",
                    "-m",
                    "polus.plugins.transforms.images.montage"
                ],
                "class": "CommandLineTool",
                "cwlVersion": "v1.2",
                "inputs": {
                    "filePattern": {
                        "inputBinding": {
                            "prefix": "--filePattern"
                        },
                        "type": "string"
                    },
                    "flipAxis": {
                        "inputBinding": {
                            "prefix": "--flipAxis"
                        },
                        "type": "string?"
                    },
                    "gridSpacing": {
                        "inputBinding": {
                            "prefix": "--gridSpacing"
                        },
                        "type": "string?"
                    },
                    "imageSpacing": {
                        "inputBinding": {
                            "prefix": "--imageSpacing"
                        },
                        "type": "string?"
                    },
                    "inpDir": {
                        "inputBinding": {
                            "prefix": "--inpDir"
                        },
                        "type": "Directory"
                    },
                    "layout": {
                        "inputBinding": {
                            "prefix": "--layout"
                        },
                        "type": "string?"
                    },
                    "outDir": {
                        "inputBinding": {
                            "prefix": "--outDir"
                        },
                        "type": "Directory"
                    }
                },
                "outputs": {
                    "outDir": {
                        "outputBinding": {
                            "glob": "$(inputs.outDir.basename)"
                        },
                        "type": "Directory"
                    }
                },
                "requirements": {
                    "DockerRequirement": {
                        "dockerPull": "polusai/montage-plugin:0.5.0"
                    },
                    "InitialWorkDirRequirement": {
                        "listing": [
                            {
                                "entry": "$(inputs.outDir)",
                                "writable": true
                            }
                        ]
                    },
                    "InlineJavascriptRequirement": {}
                }
            }
        },
        "viz_workflow_BBBC001_phase1__step__5__ImageAssembler": {
            "in": {
                "imgPath": {
                    "source": "viz_workflow_BBBC001_phase1__step__3__OmeConverter/outDir"
                },
                "outDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__5__ImageAssembler___outDir"
                },
                "stitchPath": {
                    "source": "viz_workflow_BBBC001_phase1__step__4__Montage/outDir"
                }
            },
            "out": [
                "outDir"
            ],
            "run": {
                "baseCommand": [
                    "python3",
                    "-m",
                    "polus.plugins.transforms.images.image_assembler"
                ],
                "class": "CommandLineTool",
                "cwlVersion": "v1.2",
                "inputs": {
                    "imgPath": {
                        "inputBinding": {
                            "prefix": "--imgPath"
                        },
                        "type": "Directory"
                    },
                    "outDir": {
                        "inputBinding": {
                            "prefix": "--outDir"
                        },
                        "type": "Directory"
                    },
                    "preview": {
                        "inputBinding": {
                            "prefix": "--preview"
                        },
                        "type": "boolean?"
                    },
                    "stitchPath": {
                        "inputBinding": {
                            "prefix": "--stitchPath"
                        },
                        "type": "Directory"
                    },
                    "timesliceNaming": {
                        "inputBinding": {
                            "prefix": "--timesliceNaming"
                        },
                        "type": "boolean?"
                    }
                },
                "outputs": {
                    "outDir": {
                        "outputBinding": {
                            "glob": "$(inputs.outDir.basename)"
                        },
                        "type": "Directory"
                    }
                },
                "requirements": {
                    "DockerRequirement": {
                        "dockerPull": "polusai/image-assembler-plugin:1.4.0-dev0"
                    },
                    "InitialWorkDirRequirement": {
                        "listing": [
                            {
                                "entry": "$(inputs.outDir)",
                                "writable": true
                            }
                        ]
                    },
                    "InlineJavascriptRequirement": {}
                }
            }
        },
        "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide": {
            "in": {
                "imageType": {
                    "source": "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___imageType"
                },
                "inpDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__5__ImageAssembler/outDir"
                },
                "outDir": {
                    "source": "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___outDir"
                },
                "pyramidType": {
                    "source": "viz_workflow_BBBC001_phase1__step__6__PrecomputeSlide___pyramidType"
                }
            },
            "out": [
                "outDir"
            ],
            "run": {
                "baseCommand": [
                    "python3",
                    "-m",
                    "polus.plugins.visualization.precompute_slide"
                ],
                "class": "CommandLineTool",
                "cwlVersion": "v1.2",
                "inputs": {
                    "filePattern": {
                        "inputBinding": {
                            "prefix": "--filePattern"
                        },
                        "type": "string?"
                    },
                    "imageType": {
                        "inputBinding": {
                            "prefix": "--imageType"
                        },
                        "type": "string?"
                    },
                    "inpDir": {
                        "inputBinding": {
                            "prefix": "--inpDir"
                        },
                        "type": "Directory"
                    },
                    "outDir": {
                        "inputBinding": {
                            "prefix": "--outDir"
                        },
                        "type": "Directory"
                    },
                    "pyramidType": {
                        "inputBinding": {
                            "prefix": "--pyramidType"
                        },
                        "type": "string"
                    }
                },
                "outputs": {
                    "outDir": {
                        "outputBinding": {
                            "glob": "$(inputs.outDir.basename)"
                        },
                        "type": "Directory"
                    }
                },
                "requirements": {
                    "DockerRequirement": {
                        "dockerPull": "polusai/precompute-slide-plugin:1.7.0-dev0"
                    },
                    "InitialWorkDirRequirement": {
                        "listing": [
                            {
                                "entry": "$(inputs.outDir)",
                                "writable": true
                            }
                        ]
                    },
                    "InlineJavascriptRequirement": {}
                }
            }
        }
    }
}